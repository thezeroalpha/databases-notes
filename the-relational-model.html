<html>
<head>
    <link rel="Stylesheet" type="text/css" href="style.css" />
    <title>the-relational-model</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" async src="https://cdn.jsdelivr.net/gh/mathjax/MathJax@2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
<style type="text/css">
nav a {
    text-align: left;
}
nav #name {
    text-align: right;
    float: right;
    font-style: italic;
}
</style>
    <nav>
    <a href="index.html">Index</a>
    <span id="name">Alex Balgavy</span>
    </nav>
    <hr>
    <div class="content">
    
<div id="The relational model"><h2 id="The relational model" class="header"><a href="#The relational model">The relational model</a></h2></div>
<div id="The relational model-Concepts: schema, state"><h3 id="Concepts: schema, state" class="header"><a href="#The relational model-Concepts: schema, state">Concepts: schema, state</a></h3></div>
<p>
<img src="img/database-schema-tree.png" alt="Database schema tree" />
</p>

<div id="The relational model-Concepts: schema, state-Data types"><h4 id="Data types" class="header"><a href="#The relational model-Concepts: schema, state-Data types">Data types</a></h4></div>
<p>
all table entries are data values that conform to some selection of data types.
</p>

<p>
example data types:
</p>
<ul>
<li>
strings:

<ul>
<li>
<code>VARCHAR(n)</code> strings up to n characters, use this if you know a certain maximum length

<li>
<code>TEXT</code> variable length up to 2 GB (but does not always take up 2 GB)

</ul>
<li>
numbers:

<ul>
<li>
<code>INT</code> integer

<li>
<code>NUMERIC(n)</code> decimal number with n digits

</ul>
<li>
date and time

<li>
binary data, like a <code>BLOB</code> (binary large object)

</ul>

<p>
domain <code>val(D)</code> of a type D is the set of possible values for that type
</p>

<p>
with SQL, we can create our own application-specific domains (new data types). examples:
</p>
<ul>
<li>
<code>CREATE DOMAIN EXNUM AS NUMERIC(2)</code>

<li>
<code>CREATE DOMAIN EXNUM AS NUMERIC(2) CHECK(VALUE &gt; 0)</code>

</ul>

<div id="The relational model-Concepts: schema, state-Relation schema"><h4 id="Relation schema" class="header"><a href="#The relational model-Concepts: schema, state-Relation schema">Relation schema</a></h4></div>
<p>
relation schema s (schema of single relation) defines:
</p>
<ul>
<li>
finite sequence A₁..An of distinct attribute names

<li>
for each attribute Ai a data type (domain) Di

</ul>

<p>
written as: s = { A₁ : D₁, ..., An : Dn }
</p>

<p>
SQL notation:
</p>

<pre>
CREATE TABLE exercises
    (CAT    CHAR(1),
     ENO    NUMERIC(2),
     TOPIC  VARCHAR(40),
     MAXPT  NUMERIC(2))
</pre>

<p>
a relational database schema S defines:
</p>
<ul>
<li>
finite set of relation names {R₁, ..., Rm}

<li>
for every relation R a relation schema sch(R)

<li>
a set of C integrity constraints

</ul>

<p>
so S = ({R₁, ..., Rm}, sch, C)
</p>

<div id="The relational model-Concepts: schema, state-Tuples"><h4 id="Tuples" class="header"><a href="#The relational model-Concepts: schema, state-Tuples">Tuples</a></h4></div>
<p>
used to formalize table rows.
so e.g. in table exercises: <code>(’H’, 1, ’Rel.Alg.’, 10)</code>
</p>

<div id="The relational model-Concepts: schema, state-Database states"><h4 id="Database states" class="header"><a href="#The relational model-Concepts: schema, state-Database states">Database states</a></h4></div>
<p>
let a database schema ({R₁, ..., Rm}, schema, C) be given.
</p>

<p>
a database state I for this database schema defines for every relation name Ri to a finite set of tuples I(Ri) w.r.t the relation schema Schema(Ri)
</p>

<div id="The relational model-Null values"><h3 id="Null values" class="header"><a href="#The relational model-Null values">Null values</a></h3></div>
<p>
relational model allows missing attribute values.
</p>

<p>
these are represented by <code>NULL</code>. not the same as 0 or an empty string.
</p>

<p>
used to model scenarios like:
</p>
<ul>
<li>
a value exists IRL but is not known

<li>
no value exists

<li>
attribute is not applicable

<li>
any value will do

</ul>

<p>
without null values, you'd have to split a relation into specific relations, like <code>student_with_email</code> and <code>student_without_email</code>. or the users would have to make up a fake value, which would not be uniform and you'd have no idea how to query.
</p>

<p>
problems:
</p>
<ul>
<li>
no clear semantics, since null values can be used in many scenarios

<li>
SQL has three-valued logic (true, false, unknown), so if you want to check for null, you have to say <code>WHERE A IS NULL</code>

</ul>

<p>
so declaring many attributes as NOT NULL simplifies the program, but only do that if you're sure that there's always a value.
</p>

<div id="The relational model-Constraints"><h3 id="Constraints" class="header"><a href="#The relational model-Constraints">Constraints</a></h3></div>
<p>
the database should be an image of the relevant subset of the real world. plain definition of tables often allows too many database states.
</p>

<p>
Integrity constraints (IC): conditions which every database state has to satisfy, restricting the set of possible database states.
</p>

<p>
In <code>CREATE TABLE</code>, possible constraints:
</p>
<ul>
<li>
<code>NOT NULL</code>: no value in this column can be null

<li>
<code>Keys</code>: each key value can only appear once

<li>
<code>Foreign keys</code>: values in a column must appear as key values in another table

<li>
<code>CHECK</code>: column values have to satisfy a given predicate

</ul>

<p>
Why specify constraints:
</p>
<ul>
<li>
some protection against data input errors

<li>
document knowledge about database states

<li>
enforce law/company standards

<li>
protect against inconsistency

<li>
simplify queries in programs

</ul>

<div id="The relational model-Keys"><h3 id="Keys" class="header"><a href="#The relational model-Keys">Keys</a></h3></div>
<p>
key of relation R is attribute A that uniquely identifies tuples in R. this refers to all possible database states, not just the current one.
</p>

<p>
key constraint is satisfied in database state iff all tuples have different values for A.
</p>

<p>
once something is declared as a key, the DBMS refuses insertion of tuples with duplicate key values.. this refers to all possible database states, not just the current one.
</p>

<p>
keys can consist of several attributes, then they are composite keys. if columns A,B form a composite key, there cannot be two tuples t ≠ u which agree in both attributes. keys should never change.
</p>

<p>
a key constraint becomes weaker (less restrictive) if attributes are added to it.
</p>

<p>
a key is minimal if no attribute can be removed without destroying the key constraint.
</p>

<p>
a relation may have more than one minimal key. one is the primary key, which cannot be null. other keys are alternate/secondary.
</p>

<p>
choosing a primary key: single simple attribute, never updated
</p>

<div id="The relational model-Keys-Foreign keys"><h4 id="Foreign keys" class="header"><a href="#The relational model-Keys-Foreign keys">Foreign keys</a></h4></div>
<p>
use key attributes to uniquely reference a tuple, like a pointer. denoted with arrows:
</p>

<pre>
RESULTS (SID → STUDENTS,
        (CAT, ENO) → EXERCISES,
        POINTS)
        STUDENTS (SID,FIRST,LAST,EMAIL)
        EXERCISES (CAT,ENO,TOPIC,MAXPT)
</pre>

<p>
to refer from relation R to tuples of S, add primary key attributes of S to attributes of R. only stable if the logical 'address' of a tuple does not change.
</p>

<p>
implements a one-to-many relationship.
</p>

<p>
an existence guarantee is needed.
</p>

<p>
foreign key constraints in SQL:
</p>

<pre>
CREATE TABLE RESULTS (
    ...
    FOREIGN KEY (SID) REFERENCES STUDENTS(SID)
)
</pre>

<p>
this ensures that every referenced row exists, which ensures referential integrity of the database.
</p>

<p>
these operations violate the constraints:
</p>
<ul>
<li>
insertion into table with foreign key without matching referenced tuple. DBMS rejects update.

<li>
deletion from table if the tuple is referenced via foreign key. either DBMS rejects, both are deleted (cascade), or foreign key is set to null.

</ul>

<p>
only keys may be referenced. a table with composite key must be referenced by composite key that has same number of attributes.
</p>

    </div>
</body>
</html>
